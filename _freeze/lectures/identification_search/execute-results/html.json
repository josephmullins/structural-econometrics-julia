{
  "hash": "dd95f80f1e3fe023470a8f9d125bc762",
  "result": {
    "engine": "jupyter",
    "markdown": "# The Search Model\n\n## Identification of the Model without Heterogeneity\n\nThe @Mccall Search Model that we introduced as a [prototype model](../models/search.qmd) is an excellent introduction to the identification of structural models. A classic treatment of identification of this model is provided by @flinn1982. \n\n\n### Data\n\nIdentification arguments *always* begin with an assumption on available data. Even though the model is dynamic, we will show that all we really need is a single cross-section of data:\n\n$$ (E_{n},t_{U,n},W_{n})_{n=0}^{N} $$\n\nwhere :\n\n- $E_{n}\\in\\{0,1\\}$ indicates the employment status of individual $n$\n- If the individual is employed ($E_{n}=1$) we see the wage, $W_{n}$, which is otherwise assumed to be missing.\n- If the individual is unemployed ($E_{n}=0$), then we see the duration of unemployment $t_{U,n}$, which is otherwise assumed to be missing.\n\n::: {.callout-note icon=\"false\" collapse=\"true\"}\n## Example: CPS Data\n\n::: {#exm-CPS_data}\n### Reading the data\nLet's take a look at data from the CPS on wages, employment status, and labor market transitions. Here is code to read in the data:\n\n::: {#376ec7f0 .cell execution_count=1}\n``` {.julia .cell-code}\nusing CSV, DataFrames, DataFramesMeta, Statistics\n\ndata = CSV.read(\"../data/cps_00019.csv\",DataFrame)\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n<div><div style = \"float: left;\"><span>183277×22 DataFrame</span></div><div style = \"float: right;\"><span style = \"font-style: italic;\">183252 rows omitted</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">YEAR</th><th style = \"text-align: left;\">SERIAL</th><th style = \"text-align: left;\">MONTH</th><th style = \"text-align: left;\">HWTFINL</th><th style = \"text-align: left;\">CPSID</th><th style = \"text-align: left;\">ASECFLAG</th><th style = \"text-align: left;\">PERNUM</th><th style = \"text-align: left;\">WTFINL</th><th style = \"text-align: left;\">CPSIDP</th><th style = \"text-align: left;\">AGE</th><th style = \"text-align: left;\">SEX</th><th style = \"text-align: left;\">RACE</th><th style = \"text-align: left;\">MARST</th><th style = \"text-align: left;\">EMPSTAT</th><th style = \"text-align: left;\">LABFORCE</th><th style = \"text-align: left;\">UHRSWORKT</th><th style = \"text-align: left;\">DURUNEMP</th><th style = \"text-align: left;\">EDUC</th><th style = \"text-align: left;\">HOURWAGE</th><th style = \"text-align: left;\">PAIDHOUR</th><th style = \"text-align: left;\">EARNWEEK</th><th style = \"text-align: left;\">UHRSWORKORG</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Union{Missing, Int64}\" style = \"text-align: left;\">Int64?</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1609.49</td><td style = \"text-align: right;\">20161200000200</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1420.75</td><td style = \"text-align: right;\">20161200000201</td><td style = \"text-align: right;\">72</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">55</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">81</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1797.04</td><td style = \"text-align: right;\">20180100000300</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">2053.27</td><td style = \"text-align: right;\">20180100000301</td><td style = \"text-align: right;\">66</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">997</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">111</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1797.04</td><td style = \"text-align: right;\">20180100000300</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1797.04</td><td style = \"text-align: right;\">20180100000302</td><td style = \"text-align: right;\">61</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">997</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">111</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">9</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1735.76</td><td style = \"text-align: right;\">20171000000400</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1735.76</td><td style = \"text-align: right;\">20171000000401</td><td style = \"text-align: right;\">52</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">4</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">40</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">73</td><td style = \"text-align: right;\">20.84</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">903.0</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">9</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1735.76</td><td style = \"text-align: right;\">20171000000400</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">4</td><td style = \"text-align: right;\">3069.4</td><td style = \"text-align: right;\">20171000000404</td><td style = \"text-align: right;\">19</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">6</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">40</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">73</td><td style = \"text-align: right;\">10.0</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">400.0</td><td style = \"text-align: right;\">40</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">6</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1582.77</td><td style = \"text-align: right;\">20171000000600</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1582.77</td><td style = \"text-align: right;\">20171000000601</td><td style = \"text-align: right;\">56</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">4</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">40</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">111</td><td style = \"text-align: right;\">25.0</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1250.0</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">7</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1582.77</td><td style = \"text-align: right;\">20171000000600</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">2409.42</td><td style = \"text-align: right;\">20171000000602</td><td style = \"text-align: right;\">22</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">6</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">30</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">81</td><td style = \"text-align: right;\">9.5</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">70.0</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">8</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">11</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1795.64</td><td style = \"text-align: right;\">20170100000900</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1795.64</td><td style = \"text-align: right;\">20170100000901</td><td style = \"text-align: right;\">23</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">6</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">40</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">124</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">9</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">11</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1795.64</td><td style = \"text-align: right;\">20170100000900</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1795.64</td><td style = \"text-align: right;\">20170100000902</td><td style = \"text-align: right;\">24</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">6</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">40</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">124</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">10</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">12</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1927.69</td><td style = \"text-align: right;\">20170100001000</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1927.69</td><td style = \"text-align: right;\">20170100001001</td><td style = \"text-align: right;\">59</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">55</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">111</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">11</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">12</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1927.69</td><td style = \"text-align: right;\">20170100001000</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">2151.5</td><td style = \"text-align: right;\">20170100001002</td><td style = \"text-align: right;\">53</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">58</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">81</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">12</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">14</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">2926.96</td><td style = \"text-align: right;\">20171200001200</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">2926.96</td><td style = \"text-align: right;\">20171200001201</td><td style = \"text-align: right;\">24</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">6</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">40</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">73</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">13</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">15</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1861.24</td><td style = \"text-align: right;\">20161200000800</td><td style = \"font-style: italic; text-align: right;\">missing</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1557.36</td><td style = \"text-align: right;\">20161200000801</td><td style = \"text-align: right;\">60</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">40</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">124</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">183266</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">72283</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">275.748</td><td style = \"text-align: right;\">20170107444500</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">280.118</td><td style = \"text-align: right;\">20170107444503</td><td style = \"text-align: right;\">33</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">6</td><td style = \"text-align: right;\">21</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">61</td><td style = \"text-align: right;\">73</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">183267</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">72286</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">332.029</td><td style = \"text-align: right;\">20170307448900</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">332.029</td><td style = \"text-align: right;\">20170307448901</td><td style = \"text-align: right;\">44</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">30</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">111</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">183268</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">72286</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">332.029</td><td style = \"text-align: right;\">20170307448900</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">334.955</td><td style = \"text-align: right;\">20170307448902</td><td style = \"text-align: right;\">46</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">45</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">91</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">183269</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">72288</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">341.227</td><td style = \"text-align: right;\">20171207232200</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">341.227</td><td style = \"text-align: right;\">20171207232201</td><td style = \"text-align: right;\">42</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">6</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">40</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">111</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">365.0</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">183270</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">72288</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">341.227</td><td style = \"text-align: right;\">20171207232200</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">281.741</td><td style = \"text-align: right;\">20171207232202</td><td style = \"text-align: right;\">41</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">4</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">40</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">73</td><td style = \"text-align: right;\">14.0</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">560.0</td><td style = \"text-align: right;\">40</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">183271</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">72289</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">256.804</td><td style = \"text-align: right;\">20170107445500</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">256.804</td><td style = \"text-align: right;\">20170107445501</td><td style = \"text-align: right;\">42</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">4</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">45</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">73</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">183272</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">72291</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">281.741</td><td style = \"text-align: right;\">20171207232600</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">507.056</td><td style = \"text-align: right;\">20171207232601</td><td style = \"text-align: right;\">42</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">40</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">111</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">519.23</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">183273</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">72291</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">281.741</td><td style = \"text-align: right;\">20171207232600</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">281.741</td><td style = \"text-align: right;\">20171207232602</td><td style = \"text-align: right;\">43</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">50</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">123</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1442.3</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">183274</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">72291</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">281.741</td><td style = \"text-align: right;\">20171207232600</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">4</td><td style = \"text-align: right;\">377.923</td><td style = \"text-align: right;\">20171207232604</td><td style = \"text-align: right;\">18</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">6</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">15</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">60</td><td style = \"text-align: right;\">9.0</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">108.0</td><td style = \"text-align: right;\">12</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">183275</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">72292</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">288.99</td><td style = \"text-align: right;\">20171207232700</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">288.99</td><td style = \"text-align: right;\">20171207232701</td><td style = \"text-align: right;\">32</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">6</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">40</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">81</td><td style = \"text-align: right;\">25.0</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">1000.0</td><td style = \"text-align: right;\">40</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">183276</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">72292</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">288.99</td><td style = \"text-align: right;\">20171207232700</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">288.99</td><td style = \"text-align: right;\">20171207232702</td><td style = \"text-align: right;\">30</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">20</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">81</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">0</td><td style = \"text-align: right;\">9999.99</td><td style = \"text-align: right;\">999</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">183277</td><td style = \"text-align: right;\">2018</td><td style = \"text-align: right;\">72292</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">288.99</td><td style = \"text-align: right;\">20171207232700</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">3</td><td style = \"text-align: right;\">336.057</td><td style = \"text-align: right;\">20171207232703</td><td style = \"text-align: right;\">31</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">10</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">997</td><td style = \"text-align: right;\">999</td><td style = \"text-align: right;\">91</td><td style = \"text-align: right;\">99.99</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">1346.0</td><td style = \"text-align: right;\">999</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nAs you can see from the preview of the data, the data is taken from January-March 2018. Here is a quick snippet of code to see how many observations we have on average per person:\n\n::: {#a124c4c6 .cell execution_count=2}\n``` {.julia .cell-code}\n@chain data begin\n    groupby(:CPSIDP)\n    @combine :T = length(:EMPSTAT)\n    @combine :average = mean(:T) :frac_panel = mean(:T.>1)\nend\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div><div style = \"float: left;\"><span>1×2 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">average</th><th style = \"text-align: left;\">frac_panel</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: right;\">1.83191</td><td style = \"text-align: right;\">0.582806</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nSo we see that more than half of the individuals in this sample can be found in more than one month of the data.\n\nThe `@chain` macro comes from the package `DataFramesMeta` and is a convenient syntax for composing operations into one block. For example:\n\n::: {#aabc2d41 .cell execution_count=3}\n``` {.julia .cell-code}\n@chain x begin\n    func1(y1)\n    func2(y2)\n    func3(y3)\nend\n```\n:::\n\n\nis equivalent to\n\n::: {#ccd5d12d .cell execution_count=4}\n``` {.julia .cell-code}\nfunc3(func2(func1(x,y1),y2),y3)\n```\n:::\n\n\n:::\n\n::: {#exm-CPS_moments}\n### Calculating some moments\n\nYou may find the [codebook](/data/CPS-Codebook.html) useful for understanding particular variables. We have already limited the data to individuals who are working (`EMPSTAT`=10), have a job but did not work last week (`EMPSTAT`==12), or are unemployed (`EMPSTAT`==21).\n\nSuppose we wanted to use the panel dimension to measure transition rates. Here is a simple way to do that by simply measuring transitions between January and Feburary.\n\n::: {#689590b0 .cell execution_count=5}\n``` {.julia .cell-code}\ndata[!,:E] .= data.EMPSTAT.<21 #<- code the employment variable\n\ndata_jan = @chain data begin\n    @subset :MONTH.==1\n    @select :CPSIDP :AGE :SEX :EDUC :RACE :E\n    @rename :E_lag = :E\nend\n\ndata_merged = @chain data begin\n    @subset :MONTH.==2\n    @select :CPSIDP :E\n    innerjoin(data_jan,on=:CPSIDP)\nend\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div><div style = \"float: left;\"><span>41262×7 DataFrame</span></div><div style = \"float: right;\"><span style = \"font-style: italic;\">41237 rows omitted</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">CPSIDP</th><th style = \"text-align: left;\">E</th><th style = \"text-align: left;\">AGE</th><th style = \"text-align: left;\">SEX</th><th style = \"text-align: left;\">EDUC</th><th style = \"text-align: left;\">RACE</th><th style = \"text-align: left;\">E_lag</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Bool\" style = \"text-align: left;\">Bool</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Bool\" style = \"text-align: left;\">Bool</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: right;\">20161200000201</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">72</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">81</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: right;\">20180100000301</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">66</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">111</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: right;\">20180100000302</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">61</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">111</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: right;\">20170100000901</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">23</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">124</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: right;\">20170100000902</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">24</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">124</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">6</td><td style = \"text-align: right;\">20170100001001</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">59</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">111</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">7</td><td style = \"text-align: right;\">20170100001002</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">53</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">81</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">8</td><td style = \"text-align: right;\">20171200001201</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">24</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">73</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">9</td><td style = \"text-align: right;\">20161200000801</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">60</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">124</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">10</td><td style = \"text-align: right;\">20161200000802</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">57</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">123</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">11</td><td style = \"text-align: right;\">20170100001401</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">50</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">73</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">false</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">12</td><td style = \"text-align: right;\">20170100001403</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">18</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">81</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">13</td><td style = \"text-align: right;\">20170100001405</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">29</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">50</td><td style = \"text-align: right;\">200</td><td style = \"text-align: right;\">true</td></tr><tr><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td><td style = \"text-align: right;\">&vellip;</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">41251</td><td style = \"text-align: right;\">20161107451001</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">59</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">92</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">41252</td><td style = \"text-align: right;\">20161107451901</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">59</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">91</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">41253</td><td style = \"text-align: right;\">20171107237801</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">45</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">91</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">41254</td><td style = \"text-align: right;\">20171107237802</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">37</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">123</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">41255</td><td style = \"text-align: right;\">20171207232201</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">41</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">111</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">41256</td><td style = \"text-align: right;\">20171207232202</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">41</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">73</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">41257</td><td style = \"text-align: right;\">20161107452301</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">38</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">73</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">41258</td><td style = \"text-align: right;\">20161107452302</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">29</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">73</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">41259</td><td style = \"text-align: right;\">20170107445501</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">41</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">73</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">41260</td><td style = \"text-align: right;\">20171207232601</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">42</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">111</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">41261</td><td style = \"text-align: right;\">20171207232602</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">43</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">123</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">41262</td><td style = \"text-align: right;\">20171207232604</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">17</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">60</td><td style = \"text-align: right;\">100</td><td style = \"text-align: right;\">true</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nSo now we can calculate the overall transition rate out of unemployment:\n\n::: {#e9500c58 .cell execution_count=6}\n``` {.julia .cell-code}\n@combine data_merged begin\n    :EU =  1-mean(:E[:E_lag.==1])\n    :UE = mean(:E[:E_lag.==0])\nend \n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```{=html}\n<div><div style = \"float: left;\"><span>1×2 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">EU</th><th style = \"text-align: left;\">UE</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: right;\">0.00997824</td><td style = \"text-align: right;\">0.377255</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nSo here we're estimating a very low separation rate and a pretty high hazard rate out of unemployment.\n:::\n:::{#exm-CPS_hetero}\n#### Observable heterogeneity\n\nNext we'll define a very simple education classification (Bachelor's degree or not) and race classification (white vs non-white), and use `groupby` to calculate rates separately by demographics:\n\n::: {#17be8246 .cell execution_count=7}\n``` {.julia .cell-code}\n@chain data_merged begin\n    @transform begin\n        :bachelors = :EDUC.>=111\n        :nonwhite = :RACE.!=100 \n    end\n    groupby([:bachelors,:nonwhite,:SEX])\n    @combine begin\n       :EU =  1-mean(:E[:E_lag.==1])\n       :UE = mean(:E[:E_lag.==0])\n    end \nend\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```{=html}\n<div><div style = \"float: left;\"><span>8×5 DataFrame</span></div><div style = \"clear: both;\"></div></div><div class = \"data-frame\" style = \"overflow-x: scroll;\"><table class = \"data-frame\" style = \"margin-bottom: 6px;\"><thead><tr class = \"header\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">Row</th><th style = \"text-align: left;\">bachelors</th><th style = \"text-align: left;\">nonwhite</th><th style = \"text-align: left;\">SEX</th><th style = \"text-align: left;\">EU</th><th style = \"text-align: left;\">UE</th></tr><tr class = \"subheader headerLastRow\"><th class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\"></th><th title = \"Bool\" style = \"text-align: left;\">Bool</th><th title = \"Bool\" style = \"text-align: left;\">Bool</th><th title = \"Int64\" style = \"text-align: left;\">Int64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th><th title = \"Float64\" style = \"text-align: left;\">Float64</th></tr></thead><tbody><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">1</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0.0131</td><td style = \"text-align: right;\">0.40257</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">2</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">0.0110061</td><td style = \"text-align: right;\">0.385417</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">3</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0.0159176</td><td style = \"text-align: right;\">0.338346</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">4</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">0.0150977</td><td style = \"text-align: right;\">0.300885</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">5</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0.00447284</td><td style = \"text-align: right;\">0.315315</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">6</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">false</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">0.00601388</td><td style = \"text-align: right;\">0.489362</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">7</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">1</td><td style = \"text-align: right;\">0.00547303</td><td style = \"text-align: right;\">0.342105</td></tr><tr><td class = \"rowNumber\" style = \"font-weight: bold; text-align: right;\">8</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">true</td><td style = \"text-align: right;\">2</td><td style = \"text-align: right;\">0.00836237</td><td style = \"text-align: right;\">0.290323</td></tr></tbody></table></div>\n```\n:::\n:::\n\n\nWhat do these differences in transition rates tell you about how we should extend the simple model with homogenous parameters?\n:::\n:::\n\n### Steady State\n\nA key assumption for identification in this case is that the economy is in **steady state**. Let $U_{t}$ be fraction of individuals that are unemployed at time $t$. Let $p_{\\tau,t}$ be the fraction of individuals at time $t$ with unemployment duration $\\tau$. In general, these objects evolve according to the rules:\n\n\\begin{eqnarray}\nU_{t+1} = (1-h)U_{t} + \\delta (1-U_{t+1}) \\\\\np_{\\tau+1,t+1} = (1-h)p_{\\tau,t} \\\\\np_{0,t+1} = \\delta (1-U_{t})\n\\end{eqnarray}\nwhere $h$ is the \"hazard rate\" of exiting unemployment, $\\lambda(1-F_{W}(w^*))$. Enforcing that these objects are constant between $t$ and $t+1$ (the steady state assumption) gives:\n\n\\begin{eqnarray}\nU_{t} = \\frac{\\delta}{\\delta+h} \\\\\np_\\tau = \\frac{\\delta h}{\\delta+h}(1-h)^{\\tau}\n\\end{eqnarray}\n\n### Writing Joint Probabilities\n\nWith these probabilities in hand, we can write the sampling distribution $\\mathbb{P}$ in terms of equilibrium objects:\n\n$$ \\mathbb{P}(E,t_U,W) = \\left(\\frac{h}{h+\\delta}F_{W}(W|W>w^*)\\right)^{E}\\left(\\frac{\\delta h}{\\delta+h}(1-h)^{t_{U}}\\right)^{1-E} $$\n\n### Thinking Through Identification\n\nOften it is helpful to break down the joint distribution of observables into unconditional and conditional distributions. Notice here that:\n\n$$ \\mathbb{P}(t_{U}|E=0) = h\\times(1-h)^{t_{U}} $$\n\nand so the hazard rate $h$ can be inferred from the distribution of unemployment durations.\n\nNext, notice that the probability of being unemployed is \n\n$$ \\mathbb{P}(E=0) = \\frac{\\delta}{\\delta+h} $$\n\nand so $\\delta$ is given by $h$ (which we now know) and the fraction of unemployed.\n\nFinally, we see that\n\n$$ \\mathbb{P}(W|E=1) = F_{W}(W|W>w^*) $$\n\nObserved wages are equal to the offer distribution *conditional on the wage offer being acceptable*. This tells us that, although the conditional distribution can be identifiable, we do not know the distribution of wage offers that are never accepted (those below $w^*$). Let $\\underline{w}$ be the lower bound on the support of the sampling distribution $\\mathbb{P}$. Clearly, $w^*$ is identified since:\n\n$$ w^* = \\underline{w} $$\n\nCan we identify the deeper structural parameters, $b$, $\\lambda$, and $\\beta$? Not quite. Let's rewrite the reservation wage equation as:\n\n$$ w^* = b + \\beta h\\int_{w^*}\\frac{1-F(W|W>w^*)}{1-\\beta(1-\\delta)}dw $$\n\nand we can see that infinitely many combinations of $b$ and $\\beta$ can rationalize the same reservation wage. Assuming a plausible value for $\\beta$ (you will learn that this is common across many structural estimation exercises), $b$ is identified by this equation.\n\n## Credibility and a Policy Counterfactual\n\nSuppose we used this model to forecast the effect of a tax credit $\\tau$ that is proportional to earnings. Under the counterfactual the value function $V$ becomes:\n\n$$ V(w) = (1+\\tau)w + \\delta U + (1-\\delta) V(w) $$\n\nRepeating the previous derivation gives a new reservation wage equation:\n\n$$ w^* = \\frac{b}{1+\\tau} + \\frac{\\beta\\lambda}{1-\\beta(1-\\delta)} \\int_{w^*}[1-F_{W}(w)]dw $$\n\nand so we see that the effect of the subsidy in the model is equivalent to reducing the flow utility of unemployment. \n\nIt is simple to forecast the effect of the policy counterfactual: we take our estimates and re-calculate the reservation wage. However notice that since the reservation wage will decrease in response to the tax credit, our forecast of the effect depends on an arbitrary parametric assumption that we had to make in order to identify the distribution of wages below the reservation wage $w^*$.\n\nThings look slightly better if we were to impose a tax ($\\tau<0$) since this at would use information about the wage distribution that is directly observable, but the underlying identifying assumption is particularly stark: it says that the policy's effect can essentially be inferred from the cross-sectional distribution of wages without any existing policy variation to speak of.\n\n::: {.callout-warning icon=\"false\"}\n## Discussion\nDoes this seem like a credible way to identify the causal impact of the tax subsidy?\n:::\n\n::: {.callout-note}\nOne thing to note about this discussion: while the initial identification discussion seems intuitive and reasonable, it takes a new light once we arrive that the *specific research question of interest*. Conceptually it is important to view the strengths and weaknesses of identification through the lens of desired counterfactuals.\n:::\n\n## Identification of the model with an exclusion restriction\n\nSuppose that we have access to a variable $Z$ that enters the model only by moving the flow utility from unemployment. We can re-write the reservation wage equation as:\n\n$$ w^*(z) = b(z) + \\frac{\\beta\\lambda}{1-\\beta(1-\\delta)}\\int_{w^*(z)}[1-F_{W}(w)]dw $$\n\nWe'll refer to $Z$ as an excluded variable because it effects selection into and out of jobs without moving the distribution of offered wages. Let $\\underline{w}(z)$ be the lower bound on the support of the *conditional* sampling distribution of wages $\\mathbb{P}(W|E=1,Z)$ and let $\\underline{w}_{F}$ be the lower bound on the support of the offer distribution $F_{W}$. \n\nAs before, we know that $w^*(z) = \\underline{w}(z)$. Now suppose there is sufficient movement in $Z$ such that the set\n\n$$ \\underline{\\mathcal{Z}} = \\{z: w^*(z)\\leq \\underline{w}_{F}\\} $$\n\nhas positive measure. This gives $\\underline{w}_{F} = \\inf_{z}\\underline{w}(z) = \\underline{w}$ and the set itself is identified as:\n\n$$ \\underline{\\mathcal{Z}} = \\{z: \\underline{w}(z)=\\underline{w}\\} $$\n\nThe unconditional distribution $F_{W}$ is non-parametrically identified by simply looking at the distribution of wages for values of $Z$ where the lower bound of the support achieves this minimum:\n\nIdentification of all other parameters can be pursued non-parametrically as a function of $z$.\n\n\n$$ F_{W}(w) = \\mathbb{P}(w | E = 1, z),\\ z \\in \\underline{\\mathcal{Z}} $$\n\n:::{.callout-note}\nForecasting the effect of the policy now makes use of *articulated variation*. The model casts variation that scales wages as being equivalent to variation in the value of unemployment $b$, for which we now have a source. This means that we can recreate the experiment by interpolating existing variation in $b$. \n:::\n\n### Further identification by functional form\n\nSuppose that $b(z)$ takes a linear form:\n\n$$ b(z) = b_0 + b_1 z. $$\n\nIn this case, for three values ($z,z',z''$) we can write:\n\n$$ w^*(z')-w^*(z) = b_1(z'-z) + \\frac{\\beta\\lambda}{1-\\beta(1-\\delta)}\\int_{w^*(z)}^{w*(z')}[1-F_{W}(w)]dw $$\n$$ w^*(z'')-w^*(z) = b_1(z''-z) + \\frac{\\beta\\lambda}{1-\\beta(1-\\delta)}\\int_{w^*(z)}^{w*(z'')}[1-F_{W}(w)]dw $$\n\nwhich is sufficient to identify the two unknowns in the equation, $\\beta$ and $b_1$. Thus, $\\beta$ is identified by additional functional form restrictions.\n\n:::{.callout-warning icon=\"false\"}\n## Discussion\n- Notice that now the policy counterfactual is given by additional parameters that attempt to match how wages and hazard rates respond to existing policy variation. \n- How do you feel about this approach relative to the case without variation? \n- How do you feel about the model's key implication that variation in $b$ is equivalent to variation in $\\tau$?\n- What would be an alternative and potentially preferable source of variation?\n:::\n\n### Identification with known scale restrictions\n\nThere are cases where it would be reasonable to assume a known relationship $b(z)$. For example, if $Z$ is a random policy variable that tells us the generosity of welfare payments. To be consistent with our specification of utility while employed, we should then write:\n\n$$ b(z) = b_0 + Z $$\n\nand here $\\beta$ would be identified. \n\n:::{.callout-note}\nNot only is $\\beta$ identified in this case, but we can see that it is a key parameter for matching the effect of $Z$, and hence will be a key parameter in determining the response of reservation wages and hazard rates to the policy.\n:::\n\n\n### The Whether vs How of Identification\n\nLet's now assume that we have access to two instruments, $(Z_{1},Z_{2})$. The former shifts $b$, as in the previous example, while the latter shifts wages. $Z_{2}$ could be a plausible instrument for labor demand, or if we wanted to think of $W$ as net wages, $Z_{2}$ could represent a policy variable that sets marginal tax rates. Let's assume that:\n\n$$ \\log(W) = \\log(\\omega) + \\log(\\mu(Z_{2})),\\ Z_{2} \\perp \\omega $$\n\nwhere $\\omega \\sim F_{\\omega}$ is the component of wages net of $Z_{2}$. The reservation wage formula can be written in terms of $\\omega^*$:\n\n$$ \\omega^*(z_1,z_2) = \\frac{b(z_1)}{\\mu(z_2)} + \\frac{\\beta\\lambda}{1-\\beta(1-\\delta)}\\int_{\\omega^*(z_1,z_2)}(1-F_{\\omega}(\\omega))d\\omega $$\n\nFixing $Z_{2}$, let $Z_{1}$ have the same support conditions as in the previous section, implying that $F_{W}(W|Z_2)$ is identified for all $Z_{2}$ in an appropriately defined subset of its support. Notice that the location of the distribution of $F_{\\omega}$ and the location of $\\mu$ are not separately identified. Hence, we are free to normalize $\\mathbb{E}[\\omega] = 0$ such that $\\log(\\mu(Z)) = \\mathbb{E}[\\log(W)|Z_2]$, and hence $\\mu(z)$ is non-parametrically identified by the conditional mean of $\\log(W)$ when $Z_{1}$ is in the region of it's support where $\\omega^*(Z_1,Z_2)\\leq \\underline{\\omega}$.\n\nIn order to introduce the **whether** versus the **how** of identification, let us begin with the observation that the model is *over-identified*: we only need a subset of the available data to identify the model. For example, note that hazard rates out of unemployment are:\n\n$$ h(z_1,z_2) = \\lambda (1-F_{\\omega}(\\omega^*(z_1,z_2))) $$\n\nAs we now know, the hazard rate $h(z_1,z_2)$ can be identified directly by the distribution of durations, conditional on $z_1,z_2$. But notice that $h(z'_1,z'_2)/h(z_1,z_2) = (1-F_\\omega(\\omega^*(z_1,z_2)))/(1-F_{\\omega}(\\omega^*(z_1,z_2)))$ where the right hand side consists of objects that are directly identified from wage data. \n\nNow you can go one of two ways: you can enrich the model based on the observation that you have many \"spare\" features of the data that could be used to identify this extra richness. **Or** you could decide that your model is sufficiently detailed to answer your question of interest (shout out @Marschak1953), and choose the estimation approach that makes your answer most credible. Since the model is undoubtedly misspecified, you will have to make peace with the idea that your model will not match every feature of the data simultaneously. This is the **how** of identification: which features of the data will you use to identify and estimate your model to make the answer to your question of interest most credible?\n\n:::{.callout-important icon=\"false\"}\n## The \"how\" of identification\nWhen your model is over-identified, which features of the data will you use to identify and estimate your model?\n:::\n\n\nHere are two examples of potential tensions:\n\n1. As we discussed above: the shape of the hazard function is identified directly from wage data. Hazard rates are important because they determine unemployment rates, and their responsiveness to $Z_1$ and $Z_2$ determine the how unemployment rates shift with these variables.\n2. The reservation wage equation above shows that the model treats changes in $Z_1$ and $Z_2$ through the same mechanism. The model requires that variation in these two variables have an identical effect on reservation wages (and hence hazard rates). This is a strong restriction that would likely not hold in extended versions of the model. Would we want identification to rely on this property if we didn't have to?\n\nHow should we approach these tensions? Just as @Marschak1953 did, let's return to the **question of interest**. We want to evaluate a policy counterfactual that varies marginal tax rates. Wouldn't this be most convincing if we show that the model parameters have been chosen to replicate the effects of pre-existing variation that is functionally identical? Some options along these lines:\n\n1. [Minimum Distance] Choose structural parameters to match --- along with more fundamental moments --- moments based on the joint distribution of unemployment durations and $z_2$. \n2. [Indirect Inference] Compute some quasi-experimental estimates of the effect of $Z_2$ on wages and hazard rates, and \n3. [Maximum Likelihood] Maximize the log-likelihood, and validate ex-post that the model can fit observed changes in the hazard rate with respect to $Z_2$, or replicate the results of a quasi-experimental study. This would show that even though the model is overi-identified, it is still using the sources of variation that we view conceptually as being most appropriate.\n\n::: {.callout-warning icon=\"false\"}\n## Discussion\n- How do you think approach compares to the case where we did not have plausible exogenous variation in wages?\n- How do you think it compares to the case where we had exogenous variation in tax rates explicitly (rather than intepolating via articulated variation: wage rates and marginal tax rates have identical effects).\n:::\n\n## Identification with unobserved heterogeneity\n\nNow suppose that we allow for $K$ *unobserved types* with population proportions given by $\\pi=\\{\\pi_{k}\\}_{k=1}^{K}$ that enter the model through the value of unemployment. Assume that we have on instrument $Z$ that shifts the flow value of unemployment in a known way:\n\n$$ b_{k}(Z) = b_{k} + Z $$\n\nsuch that we get $K$ latent reservation wages:\n\n$$ w^*_{k}(z) = b_{k} + Z + \\frac{\\beta\\lambda}{1-\\beta(1-\\delta)}\\int_{w^*_{k}(z)} $$\n\nThis gives a vector of latent hazard rates $h_{k}(z)$ for all values of the instrument $z$. The distribution of hazard rates is itself a mixture:\n\n$$ \\mathbb{P}(t_U=t|E=0,Z) = \\sum_{k}\\tilde{\\pi}_{k}h_{k}(z)(1-h_{k}(z))^{t} $$\n\nwhere $\\tilde{\\pi}_{k}$ denotes the representation of each type among the unemployed: \n\n$$\\tilde{\\pi}_{k} = \\frac{\\pi_{k}\\frac{\\delta}{\\delta+h_{k}(z)}}{U(z)} $$\n\n@heckman1984 show that, for a fixed $K$, the parameters $(\\tilde{\\pi}_{k},h_{k}(z))$ are identified from this distribution of durations.\n\n::: {.callout-tip icon=\"false\"}\n## Exercise\n::: {#exr-search_unobs_hetero}\nComplete the identification argument for this model by following these steps:\n\n1. Argue that the vector $\\pi$ and $\\delta$ can be inverted from $\\tilde{\\pi}$ and the unemployment rate $U(z)$.\n1. State an assumption on the support of $Z$ such that $F_{W}$ is identified in some part of the support of $Z$.\n2. Argue that $\\lambda$ is identified for $Z$ in this same region of the support.\n3. Argue that each $w_{k}^*(z)$ is identified from $h_{k}(z)$ and $F_{W}$.\n4. Use the reservation wage equation to argue that each $b_{k}$ and $\\beta$ is identified.\n:::\n:::\n\n\n<!-- Can we show that the model is not identified and that we need panel data? -->\n\n",
    "supporting": [
      "identification_search_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}