{
  "hash": "6260d36eea40132cadb4bd01e667572c",
  "result": {
    "engine": "jupyter",
    "markdown": "# A Simple Labor Supply Model\n\n## Model Setup and Solution\n\nConsider a dynamic labor supply model (with no uncertainty) where each agent $n$ chooses a sequence of consumption and hours, $\\{c_{t},h_{t}\\}_{t=1}^{\\infty}$, to solve:\n$$ \\max \\sum_{t=0}^\\infty \\beta^{t} \\left(\\frac{c_{t}^{1-\\sigma}}{1-\\sigma} - \\frac{\\alpha_{n}^{-1}}{1 + 1/\\psi}h_{t}^{1+1/\\psi}\\right)$$\nsubject to the intertemporal budget constraint:\n$$ \\sum_{t}q_{t}c_{t} \\leq A_{n,0} + \\sum_{t}q_{t}W_{n,t}h_{t},\\qquad q_{t} = (1+r)^{-t}.$$\nLet $H_{n,t}$ and $C_{n,t}$ be the realizations of labor supply for agent $n$ at time $t$. Labor supply in this model obeys:\n$$H_{n,t}^{1/\\psi} = (\\alpha_{n}W_{n,t})C^{-\\sigma}_{n,t}.$$\nTo simplify below, assume that $\\beta=(1+r)^{-1}$, so that the optimal solution features perfectly smoothed consumption, $C^*_{n}$. Making appropriate substitutions gives $C^*_{n}$ as the solution to:\n$$ \\left(\\sum_{t}q_{t}\\right)C^*_{n} = \\sum_{t}\\left(q_{t}W_{n,t}^{1+\\psi}\\right)\\alpha_{n}^{\\psi}(C_{n}^*)^{-\\psi\\sigma} + A_{n,0}.$$\n\n## Code to solve the model\n\nThere is only one object to solve here which is consumption given a sequence of net wages. If one were to assume also constant wages the function below solves optimal consumption.\n\n::: {.cell execution_count=1}\n``` {.julia .cell-code}\nusing Optim\nfunction solve_consumption(r,α,W,A,σ,ψ)\n    Q = 1/ (1 - 1/(1+r))\n    f(c) = (Q * c - Q * W^(1 + ψ) * α^ψ * c^(-σ*ψ) - A)^2\n    r = Optim.optimize(f,0.,A+W)\n    return r.minimizer\nend\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```\nsolve_consumption (generic function with 1 method)\n```\n:::\n:::\n\n\n## Code to simulate a cross-section\n\nHere we'll assume that wages, tastes for work, and assets co-vary systematically. For simplicity we'll use a multivariate log-normal distribution.\n\nBelow is code to simulate a cross-section of 1,000 observations.\n\n::: {.cell execution_count=2}\n``` {.julia .cell-code}\nusing Distributions\nfunction simulate_data(σ,ψ,r,N)\n    ch = [0.3 0. 0.; 0.5 0.5 0.; 0.4 0.8 1.8]\n    Σ = ch * ch'\n    X = rand(MvNormal(Σ),N)\n    α = exp.(X[1,:])\n    W = exp.(X[2,:])\n    A = exp.(X[3,:])\n    C = [solve_consumption(r,α[i],W[i],A[i],σ,ψ) for i in eachindex(A)]\n    @views H = exp.( X[1,:] .+ ψ .* X[2,:] .- ψ * σ .* log.(C) )\n    return (;α,W,A,C,H)\nend\n\n# assume risk-aversion of 2 and frisch of 0.5\nσ = 2.\nψ = 0.5\nr = 0.05\n\ndat = simulate_data(σ,ψ,r,1_000)\n\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```\n(α = [1.1895559672807827, 1.0057190238756233, 0.8774062392621625, 1.5610598524240673, 1.4808557873239059, 1.0658277003887076, 1.4624963463338099, 1.2577118822678466, 0.6763868950334098, 0.8224801054609516  …  1.5104635824355046, 1.0696716210567734, 0.6573043656087413, 0.3911629685005373, 0.7738773535776892, 1.7672916320646155, 0.855656491982216, 1.5274817137515908, 1.0889120849981992, 0.7689667756163125], W = [2.295858884820905, 0.8512748804662453, 0.6174616306448941, 1.4039985980412393, 2.31586249887857, 0.4711934041504361, 1.2038539981558591, 1.9943608735441336, 0.8026575128063196, 0.6763650876451812  …  3.193837771859185, 1.8238727142565339, 0.5720191077648129, 0.07603771331843587, 0.9071719525085785, 3.2021029588102947, 1.3610324604476105, 3.496076934665983, 0.8931259368938669, 0.4942037915209848], A = [3.392428883779486, 1.7717130774895438, 2.256366682071536, 3.0275956166573446, 0.08188953393306479, 2.914965486804927, 7.494964338908815, 0.05563222752114561, 66.53584608046536, 8.685728902891324  …  2.1692921635642928, 1.228234772763213, 0.6225388992665627, 1.0603764730818594, 1.0314809781592942, 0.3170165190463566, 0.07809098723070272, 67.1716438065646, 0.08096316567338836, 0.06261875290542847], C = [2.0302943206606376, 0.9306920591720304, 0.7300119568449044, 1.515603204198959, 2.0728680316579613, 0.6514149445312535, 1.4548623220613628, 1.7785733403242803, 3.3451705608508684, 0.9465574179528601  …  2.7007279429501443, 1.6256057413394742, 0.607250256864298, 0.1425118415637354, 0.8967418067401925, 2.7675230093188152, 1.2137870692903565, 4.860747031810567, 0.9404263327618222, 0.5534514652996084], H = [0.8877659329882217, 0.9970238927907707, 0.9444429577677761, 1.2204426519201326, 1.087170096486315, 1.1231270486787868, 1.10296010218309, 0.9986452907934491, 0.18115155065871322, 0.7146099019033737  …  0.9995070168159305, 0.8886536162784333, 0.818660954843875, 0.7568700236824503, 0.8219578125720212, 1.142706313176218, 0.8224153067478454, 0.5875752455122192, 1.0942697338554137, 0.9767447166246906])\n```\n:::\n:::\n\n\n",
    "supporting": [
      "dynamic-labor-supply_files/figure-pdf"
    ],
    "filters": []
  }
}