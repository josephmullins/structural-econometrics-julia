{
  "hash": "6260d36eea40132cadb4bd01e667572c",
  "result": {
    "engine": "jupyter",
    "markdown": "# A Simple Labor Supply Model\n\n## Model Setup and Solution\n\nConsider a dynamic labor supply model (with no uncertainty) where each agent $n$ chooses a sequence of consumption and hours, $\\{c_{t},h_{t}\\}_{t=1}^{\\infty}$, to solve:\n$$ \\max \\sum_{t=0}^\\infty \\beta^{t} \\left(\\frac{c_{t}^{1-\\sigma}}{1-\\sigma} - \\frac{\\alpha_{n}^{-1}}{1 + 1/\\psi}h_{t}^{1+1/\\psi}\\right)$$\nsubject to the intertemporal budget constraint:\n$$ \\sum_{t}q_{t}c_{t} \\leq A_{n,0} + \\sum_{t}q_{t}W_{n,t}h_{t},\\qquad q_{t} = (1+r)^{-t}.$$\nLet $H_{n,t}$ and $C_{n,t}$ be the realizations of labor supply for agent $n$ at time $t$. Labor supply in this model obeys:\n$$H_{n,t}^{1/\\psi} = (\\alpha_{n}W_{n,t})C^{-\\sigma}_{n,t}.$$\nTo simplify below, assume that $\\beta=(1+r)^{-1}$, so that the optimal solution features perfectly smoothed consumption, $C^*_{n}$. Making appropriate substitutions gives $C^*_{n}$ as the solution to:\n$$ \\left(\\sum_{t}q_{t}\\right)C^*_{n} = \\sum_{t}\\left(q_{t}W_{n,t}^{1+\\psi}\\right)\\alpha_{n}^{\\psi}(C_{n}^*)^{-\\psi\\sigma} + A_{n,0}.$$\n\n## Code to solve the model\n\nThere is only one object to solve here which is consumption given a sequence of net wages. If one were to assume also constant wages the function below solves optimal consumption.\n\n::: {#e89d5395 .cell execution_count=1}\n``` {.julia .cell-code}\nusing Optim\nfunction solve_consumption(r,α,W,A,σ,ψ)\n    Q = 1/ (1 - 1/(1+r))\n    f(c) = (Q * c - Q * W^(1 + ψ) * α^ψ * c^(-σ*ψ) - A)^2\n    r = Optim.optimize(f,0.,A+W)\n    return r.minimizer\nend\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```\nsolve_consumption (generic function with 1 method)\n```\n:::\n:::\n\n\n## Code to simulate a cross-section\n\nHere we'll assume that wages, tastes for work, and assets co-vary systematically. For simplicity we'll use a multivariate log-normal distribution.\n\nBelow is code to simulate a cross-section of 1,000 observations.\n\n::: {#d98994b7 .cell execution_count=2}\n``` {.julia .cell-code}\nusing Distributions\nfunction simulate_data(σ,ψ,r,N)\n    ch = [0.3 0. 0.; 0.5 0.5 0.; 0.4 0.8 1.8]\n    Σ = ch * ch'\n    X = rand(MvNormal(Σ),N)\n    α = exp.(X[1,:])\n    W = exp.(X[2,:])\n    A = exp.(X[3,:])\n    C = [solve_consumption(r,α[i],W[i],A[i],σ,ψ) for i in eachindex(A)]\n    @views H = exp.( X[1,:] .+ ψ .* X[2,:] .- ψ * σ .* log.(C) )\n    return (;α,W,A,C,H)\nend\n\n# assume risk-aversion of 2 and frisch of 0.5\nσ = 2.\nψ = 0.5\nr = 0.05\n\ndat = simulate_data(σ,ψ,r,1_000)\n\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```\n(α = [0.769370088431213, 0.7499777818161549, 0.811386004305868, 1.1622431833990308, 1.0012071260616142, 1.1409164018667208, 1.3769511941867982, 0.717602772423061, 1.3732877362878777, 0.7803572285609538  …  0.7030708399923061, 1.2937034687527997, 0.5195949782411872, 1.2742745896340497, 0.5825420892867847, 0.9570299294535854, 0.6844193656466966, 2.7114819665691656, 0.8688857051183492, 0.9112801446965436], W = [0.9863889958240541, 0.9508340602249311, 0.8220377378612731, 0.5766876981938149, 0.39493181183618103, 0.8404802163831009, 1.483506668505422, 0.6681192896000416, 1.4991137791120714, 0.9494222761994702  …  0.4807499974212963, 1.8750322893808449, 0.3856380920013705, 1.7638170400058442, 0.62840231931759, 0.8954940450593154, 0.35262852843483616, 10.081821156591293, 0.8101311731009287, 0.5518890940796154], A = [1.3586927998642822, 3.002361692708459, 0.1384327608604815, 2.6863642912565426, 0.007269074166886639, 0.23304005488651464, 1.933244505603474, 1.9250017182489847, 0.22892058637895366, 3.5032547230760516  …  2.142610565438305, 0.13993025205282728, 2.6912547234330657, 0.818253844433415, 2.947450193111652, 0.4027269310651917, 0.017427539664430326, 1.8906867232817686, 1.403282301217454, 0.08255970301694122], C = [0.9598933288278524, 0.9703990124126052, 0.8226644101541711, 0.7540471176076254, 0.40220087482940764, 0.9127781490261204, 1.5028756250590818, 0.72753659210226, 1.4720763283266152, 0.9912497319273893  …  0.5821457260447573, 1.712229408452387, 0.4844706394574557, 1.6457313421852249, 0.6907674701155745, 0.920135987448973, 0.37005605758789817, 7.305478582582987, 0.8585246550436398, 0.6275761359739139], H = [0.7960428276911367, 0.7536165318523924, 0.8942329750989965, 1.1704931249312667, 1.5643790091532688, 1.1459148203417668, 1.1159384914384078, 0.8062250201824133, 1.1422167133729932, 0.767078982389741  …  0.8373885490816979, 1.0346111776181635, 0.6660202675555028, 1.0283260785306179, 0.6685198719032288, 0.9842487097742938, 1.098281059643355, 1.1784944540277213, 0.9109353430653804, 1.0787266122824544])\n```\n:::\n:::\n\n\n",
    "supporting": [
      "dynamic-labor-supply_files"
    ],
    "filters": [],
    "includes": {}
  }
}